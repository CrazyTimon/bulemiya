<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>MobilyBlocks</title>
<link href="css/default.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-1.9.0.js" type="text/javascript"></script>
<link href="css/hot-sneaks/jquery-ui-1.10.0.custom.css" rel="stylesheet">
<link href="css/tipTip.css" rel="stylesheet">
<script src="js/jquery-ui-1.10.0.custom.js"></script>
<script src="js/mobilyblocks.js" type="text/javascript"></script>
<script src="js/init.js" type="text/javascript"></script>
<script src="js/jquery.tipTip.js"></script>
<script>
	
	function sRand() { // Случайная
    	return Math.random() > 0.5 ? 1 : -1;
	}

	function print_r(arrayToPrint){
		return $.each(arrayToPrint, function(index, value){
			if( arrayToPrint.length-1 == index ){
				return value; 
			}
			return value + ",";
		});
	}


	function questionsObject(){
		var __questions = [],
			__text = "",
			__bulemiya = 0,
			__anoreksiya = 0,
			__kompulsivnaya_anoreks = 0,
			__bulimist_anoreks = 0,
			__weight = "30",
			__age = "<20",
			__cursorArrayPosition = 0;
		this.init = function(){
			this.__questions = [],
			this.__text = "",
			this.__bulemiya = 0,
			this.__anoreksiya = 0,
			this.__weight = "30",
			this.__age = "<20",
			this.__kompulsivnaya_anoreks = 0,
			this.__bulimist_anoreks = 0,
			this.__cursorArrayPosition = 0		
		}

		this.setAge = function(val){
			this.__age = val;
		}

		this.setWeight = function(val){
			this.__weight = val;
		}

		this.setQuestions = function(array){
			this.__questions = array;
		}

		this.render = function(selector){
			selector;
		}

		this.getResult = function(selector){
			var text = [
			'<p>У Вас булимия - вызванная рвота.\
			 <p>Навязчивое состояние (приближено к обсессивно-компульсивным расстройствам) основанное на чувстве удовольствия.</p>\
			 <p>Фантазия о шоколадке, гамбурге, возникающая в мыслях одно из наиболее приятных состояний: предвкушение, поощрение за долгие голодные страдания на диетах. А так же сам процесс поглощения еды - все это формирует устойчивую тягу у вас к постоянному поиску и созданию такому удовольствию. В рассказах самих пациенток о ритуалах часто выявляется важность эротизирующей фантазии в отношении еды и отношение к разрядке через рвоту как к хорошо удавшемуся эротическому акту. Но это не означает, что проблема в сексуальной сфере ("Пансексуализм" Фрейда в булимии не был подтвержден ни разу); наоборот именно это компульсивное поведение, основанное на удовольствии, постепенно подменяет собой все другие удовольствия и поэтому так же снижается половое влечение. То есть, снижение полового влечение это следствие, а не причина.</p>\
			 <p>Это наиболее интенсивная форма получения удовольствия и самое главное, что быстрая: легко достать, легко контролировать, а это означает безопасность. Вы желаете все контролировать и у вас это качество ( в отличии от булимии без вызванной рвоты) сильное. Вы не любите спонтанные ситуации и если они происходят, то вгоняют вас в ступор. В том случае, если спонтанная ситуация возможна в вашем представлении, то вы постараетесь организовать и ее. Пример, если вы собираетесь с молодым человеком поехать за город и вы предполагаете, что возможен "спонтанный" секс в стоге сена, то вы тот человек, который поедет туда заранее, найдет этот стог сена, переберет его, чтоб не было иголок и колючек, взобьет его, чтоб выглядел он красивым.</p>\
			 <p>С течением времени состояние постоянного контроля приводит к мышечной усталости и в итоге появляется "хроническая усталость", а это означает нервозность, бессонницу и постоянное желание спать и соответственно депрессию или сказав по-другому - подавленное эмоционально состояние. Все это не является хорошим основанием для создания качественных близких отношений, социальной активности.</p>\
			 <p>Если ранее вы вырывали, чтобы похудеть, то достигнув желаемого (90% пациенток имеют желаемый ими вес) в дальнейшем вы обрели новую проблему - зависимость от интенсивного удовольствия. Сюда входит удовольствие от прогулок по продуктовым магазинам до длительных чтений меню в интернете в дальнейшем с заказом на дом еды. Это поведение демонстрирует вновь "эротизирующую фантазию". Вы не можете себе отказать в ней и взять под контроль ее. Создав вокруг себя контролируемый мир, тело, вы не можете контролировать свои фантазии. Прорывающие импульсы чувств, эмоций из-за долгой подавленности имеют взрывной характер.</p>\
			 <p>Поскольку вы постоянно находитесь в состоянии достижения эксклюзивных удовольствий, то вы можете иметь другие виды зависимости. В большинстве случаев пациенты с расстройством Вызванной рвоты имеют не устойчивые отношения с алкоголем. Это зависит от возраста и др.факторов. В эту категорию могут быть включен любой тип злоупотребления (кокаин, героин и т.д.) Некоторые клиенты вылечившись от наркотиков в дальнейшем "переходят" в булимию. Так же, может быть замена "чтоб не есть сегодня буду пить".</p>\
			 <p>Вы скорее всего создаете отношения с любимыми людьми, которые так же имеют зависимости и какие-либо схожие расстройства личности. Ваш партнер либо, игроман, алкоголик, наркоман и тд. Либо имеет какое-либо заболевание с которым складываются определенные отношения. самое важное, что выбирается партнер, которые эмоционально будет холоден, который не будет "лезть в душу", чтобы вы могли спокойно совершать свои тайные праздники с едой. К тому же, это дает возможность вновь избежать спонтанности и глубины в отношениях.</p>\
			 <p>Второй вариант отношений - это выбор партнера "папы", который будет спасать вас от булимии. Искать врачей, лечить. Здесь полностью проигрывается "треугольник Карпмана": спасатель, жертва.</p>\
			 <p>Таким образом вы создаете себе жизнь из зависимостей и патологий.',
			'<p>У Вас анорексия – допишем, дошлю Вам в понедельник</p>',
			'<p>У Вас компульсивное-переедание - допишем, дошлю Вам в понедельник</p>',
			'<p>У Вас булимистическая - анорексия.</p>\
			 <p>Вы имеете нормальный вес или чуть ниже нормы. У вас очень строгое отношение к себе, еде. Вы можете вырвать даже, если выпили просто сока или молока.</p>\
			 <p>Вы начинали вырывать, чтобы похудеть или удержать вес, но со временем вызываемая рвота сформировалась в отдельное заболевание.</p>',
			];
			var main_object = this;
			/*
				1-булимия
				2-анорексия
				3-компульсивное переедание
				4-булимистическая анорексия
			*/
			$(selector).on("click", function(){
				var result_box = "";
				$(this).parent().hide("clip", 1000 , function(){
					$(this).html(text[main_object.check_trouble()]);
					$(this).show("clip", 2000);
					$(this).css("padding", "5px 30px");
				});
			});
		}

		this.check_trouble = function(){
			var arr =[this.__bulemiya, this.__anoreksiya, this.__kompulsivnaya_anoreks, this.__bulimist_anoreks];
			var max_el = {key:0, value:0};
			if(this.__age != "<20" && parseInt(this.__weight)>60){
					arr[1] = -1;
					arr[3] = -1;
			} else if(parseInt(this.__weight)<60){
				arr[0] = -1;
				arr[2] = -1;
			}
			$.each(arr, function(index, val){
				console.log(index);
				if(parseInt(max_el.value) < parseInt(val)){
					max_el.value = val;
					max_el.key = index;
				}
			});
			return max_el.key;
		}

		this.auto_edit_questions = function(step, next_step, per_page) {
			var pos = this.__cursorArrayPosition;
			$.each(this.__questions.slice(pos), function(i, val){
				if(i == per_page){
					pos = pos + i;
					console.log(pos+"!ATENTION!")
					return false;
				}
				var questions = 
				'<div class="step3__question">\
					'+ val.text + '\
				</div>\
				<div class="radio">\
			    	<input type="radio" id="radio' + step.attr("id") + i + '_1" name="radio' + step.attr("id") + i + '" evals="' + print_r(val.evals) + '" value="yes"/><label for="radio' + step.attr("id") + i + '_1">да</label>\
			    	<input type="radio" id="radio' + step.attr("id") + i + '_2" name="radio' + step.attr("id") + i + '" checked="checked" /><label for="radio' + step.attr("id") + i + '_2">нет</label>\
				</div>';
				step.append(questions);
			});
			if(next_step == "last_step"){
				step.append('<hr><a href="#" class="' + next_step + '">ДАЛЕЕ >></a>');
				$( "." + next_step )
			      .button()
			      .click(function( event ) {
			        event.preventDefault();
        			$(".custom-caption").hide("slide",{ direction: "up" }, 500, function(){
		  				$(".custom-caption").html("Результат");
		  				$(".custom-caption").show("slide",{ direction: "up" }, 500);
		  			});
			      });
			} else {
				step.append('<hr><a href="#" class="submit3" next="' + next_step + '">ДАЛЕЕ >></a>');
			}
			this.__cursorArrayPosition = pos;
		}
	}
	/*
		1-булимия
		2-анорексия
		3-компульсивное переедание
		4-булимистическая анорексия
	*/
	$(function() {
		var questions_steps = [
			{text:'1. Вы каждый день думаете о еде, диетах и о том, как похудеть', evals:[1,2,3,4]},
			{text:'2. Вы используете слабительные после приема пищи', evals:[1,2,3,4]},
			{text:'3. Вы используете мочегонные средства, чтобы именно похудеть или убрать опухлость лица после кутежа с едой.', evals:[1,2,3,4]},
			{text:'4. Вы специально организуете себе вырывание: закупая предварительно еду в магазине в больших количествах, закрываясь дома.', evals:[1,2,3,4]},
			{text:'5. Перед тем, как вырвать Вы едите до боли в желудке в большинстве случае даже трудно встать, чтобы дойти до туалета. (булимия)', evals:[1]},
			{text:'6. Чувство сытости вызывает у Вас чувство паники (все кроме компульсивного-переедания)', evals:[1,2,4]},
			{text:'7. Вы разрешаете себе переваривать только "диетичные" по Вашему мнению продукты (обезжиренный творог, огурцы, укроп и тд)', evals:[1,2,3,4]},
			{text:'8. Вы не можете себе никогда отказать в еде, когда присутствуете на праздниках или гостях где организован большой стол. (компульсивное-переедание, булимия)', evals:[1,3]},
			{text:'9. У Вас вызывает тревогу отдых на курортах с пометкой "Все включено"', evals:[1,2,3,4]},
			{text:'10. В большинстве случаев возвращаясь с курорта Вы чувствуете себя еще больше уставшей из-за постоянной борьбы с едой, аппетитом и бесконечными вырываниями.', evals:[1,2,3,4]},
			{text:'11. Ваши партнеры в личной жизни, а так же друзья, как правило имеют зависимости. (алкоголь, наркотики, игроманинию, секс, еда и тд Либо являются маргинальными личностями: судимости, мошенники и тд)', evals:[1,2,3,4]},	
			{text:'12. Вы потеряли за последний год резко большой вес.', evals:[2]},
			{text:'13. Вы ежедневно занимаетесь спортом (дома или в спортзале. Дома можете приседать, если сьели, допустим, йогурт)', evals:[2]},
			{text:'14. Вы ненавидите слово "жир". К этому слову у Вас зависимое отношение: юмористические фото, картинке в интернете, смотря на себя произносите слово "жир" и видите только его.', evals:[2]},
			{text:'15. Вы состоите в социальной сети в группе анорексиков или тех кто весит не более 50 кг.', evals:[2]},
			{text:'16. Ваш вес не более 45 кг. И Вы хотите похудеть еще больше.', evals:[2]},
			{text:'17. Все вокруг Вам говорят, что Вы жутко худая и похожи на скелет', evals:[2]},
			{text:'18. Когда Вы слышите от окружающих, что Вы похожи на скелет, что Вы плохо выглядите и остались от Вас только кости Вы тайно радуетесь таким негативным оценкам', evals:[2]},
			{text:'19. В описании внешности девушки Вам тайно нравится слово "кости" - это слово вызывает возбуждение', evals:[2]},
			{text:'20. Вы просматриваете постоянно журналы мод, информацию о моде и моделях.', evals:[2]},
			{text:'21. Вы каждый день считаете каллории.', evals:[1,2,3,4]},
			{text:'22. Вы едите не более 500 каллорий в день.', evals:[2]},
			{text:'23. Вы часто мерзнете и испытываете холод в теле', evals:[2,4]},
			{text:'24. Вы постоянно ненавидите себя и внутри ругаете себя уничижительными словами.', evals:[2]},
			{text:'25. Вы практически не спите или очень трудно уснуть.', evals:[1,2,4]},
			{text:'26. У Вас нет сил встать с кровати', evals:[1,2,4]},
			{text:'27. Вы хотите еще похудеть и тогда начать жить: работать, любить, ходить в компании и тд.', evals:[1,2,3,4]},
			{text:'28. Вы постоянно ощупываете себя, кости: тазобедренные, около шеи. Вы собираете фото девушек на которых они показывают свои кости на тех или иных участках тела, спина, тазобедренная часть и тд', evals:[2]},
			{text:'29. Вы очень гордитесь тем, что Вам удалось вообще отказаться от еды.', evals:[2]},
			{text:'30. Вы гордитесь, что у Вас есть воля, сила духа в том, чтобы перестать есть.', evals:[2]},
			{text:'31. Нарушен у Вас менструальный цикл (менструации нет несколько месяцев и более)', evals:[1,2,3,4]},
			{text:'32. Вы постоянно думаете о еде', evals:[1,2,3,4]},
			{text:'33. Вы испытываете голод сразу же после еды даже тогда, когда очень плотно поели', evals:[3]},
			{text:'34. Вы едите каждые 2-3 часа с утра и до вечера', evals:[3]},
			{text:'35. Вы постоянно сидите на разных диетах', evals:[1,2,3,4]},
			{text:'36. Ваш вес скачет от 10 кг, то вверх, то вниз', evals:[1,2,3]},
			{text:'37. Ваш нынешний вес выше нормы на 15-20 кг., (норма определяется по формуле Брока)', evals:[1,3]},
			{text:'38. Вы вырываете маленький обьем еды: 1 шоколадку или сок, 1 мороженое и тд.', evals:[4]},
			{text:'39. Вы не едите целый день и когда съедаете 1 шоколадку вырываете ее.', evals:[4]},
			{text:'40. Вам не надо наедаться до боли, чтобы вырывать.', evals:[1,4]},
			{text:'41. Вас раздражает беспорядок в доме и вы всегда стараетесь поддерживать идеальную чистоту в доме, на столе, в шкафу.', evals:[4]},
			{text:'42. Вам нужно все и всех контролировать. Все зависит от Вас - в этом вы уверенны!', evals:[2,4]}];

		Anket_Questions = new questionsObject();
		Anket_Questions.init();
		Anket_Questions.setQuestions(questions_steps);
		Anket_Questions.auto_edit_questions($(".step3"), ".step4", 7);
		/*Anket_Questions.auto_edit_questions($(".step4"), ".step5", 7);
		Anket_Questions.auto_edit_questions($(".step5"), ".step6", 7);
		Anket_Questions.auto_edit_questions($(".step6"), ".step7", 7);
		Anket_Questions.auto_edit_questions($(".step7"), ".step8", 7);
		*/Anket_Questions.auto_edit_questions($(".step4"), "last_step", 7);
		Anket_Questions.getResult(".last_step")

	$.each($( ".radio" ),function(){
		$(this).buttonset();
	});
	$( "input[type=submit], button" )
      .button()
      .click(function( event ) {
        event.preventDefault();
      });
    $( "#slider" ).slider({
      range: "min",
      value: 35,
      min: 15,
      max: 120,
      slide: function( event, ui ) {
        $( "#amount" ).val( ui.value + " кг." );
      }
    });
    $( "#amount" ).val( "35 кг.");
    $( "a.submit3" )
      .button()
      .click(function( event ) {
        event.preventDefault();
      });
  });
</script>
</head>

<body>
<!--http://habrasorium.ru/jquery/671-mobily-blocks-.html-->
<div class="custom-caption">
Сколько вам лет?
</div>
	<div id="content">
		<div class="nature">
			<ul class="reset">
				<li><a href="#"><img src="img/age/young/young.jpg" alt="" /></a><div class="custom-circle-font">до 20 лет<input type="hidden" name="age" value="<20"></div></li>
				<li><a href="#"><img src="img/age/20/20.jpg" alt="" /></a><div class="custom-circle-font">20-30 лет<input type="hidden" name="age" value="20-30"></div></li>
				<li><a href="#"><img src="img/age/30/30.jpg" alt="" /></a><div class="custom-circle-font">30-40 лет<input type="hidden" name="age" value="30-40"></div></li>
				<li><a href="#"><img src="img/age/40/40.jpg" alt="" /></a><div class="custom-circle-font">40-60 лет<input type="hidden" name="age" value="40-60"></div></li>
				<li><a href="#"><img src="img/age/60/60.jpg" alt="" /></a><div class="custom-circle-font">после 60<input type="hidden" name="age" value=">60"></div></li>
			</ul>			
		</div>	
	</div>
<div class="step2">
	<input type="submit" value="Я указала свой вес" />
	<div class="amount">Мой вес: <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" disabled /></div>
	<div id="slider"></div>
	<div class="step2__description">передвиньте курсор, чтобы изменить вес</div>
</div>

<div class="steps step3 solution_tip" id="step3"></div>
<div class="steps step4" id="step4"></div>
<div class="steps step5" id="step5"></div>
<div class="steps step6" id="step6"></div>
<div class="steps step7" id="step7"></div>
<div class="steps step8" id="step8"></div>
<div class="steps step9" id="step9"></div>
<div class="steps step10" id="step10"></div>

<div id="last_step" style="display:none;">

</div>

<script type="text/javascript">
	$(document).ready(function(){
		$(".custom-caption").slideDown(2000);
		$(".submit3").on("click", function(){
			var container = $(this).parent(),
				next_container = $($(this).attr("next"));//$(".step4"),	
			refactor_validate(container, next_container);
		});
	});

	function refactor_validate(container, next_container){
		var succ_checked = container.find("input:checked[value=yes]");
		var all_checkboxes = container.find("input:checked");//ОПАСНО ТАК ДЕЛАТЬ
		$.each(succ_checked, function(index, value){
			var evals = $(value).attr("evals").split(",");
			$.each(evals, function(i,v){
				if(v=="1"){Anket_Questions.__bulemiya++;}
				if(v=="2"){Anket_Questions.__anoreksiya++}
				if(v=="3"){Anket_Questions.__kompulsivnaya_anoreks++}
				if(v=="4"){Anket_Questions.__bulimist_anoreks++}
			});	
		});
		console.log(Anket_Questions.check_trouble());
		container.hide("slide", { direction: "left" }, 500,
						function(){
					  		container.on("click", function(){
					  			var selector = container.attr("id")+next_container.attr("id");
					  			$("#"+selector).dialog()
					  		});
					  		container.on("mouseenter", function(){
					  			$(this).css({
					  				"cursor":"pointer",
					  				"opacity":"1"
					  			});
					  		});
					  		container.on("mouseleave", function(){
					  			$(this).css({
					  				"opacity":"0.8"
					  			});
					  		});
					  		next_container.show("slide", { direction: "right" }, 500 );
							$(".solution_tip").tipTip({
								defaultPosition:"top",
								activation: "hover",
								keepAlive:true,
								content:"нажмите на результат, чтобы узнать подробности",
								maxWidth: "260px"
							});
							$('.solution_tip').trigger('mouseenter');
		  				});
	}

	$(".reset>li").on("click", function(event){
		Anket_Questions.setAge($(this).find("input[name=age]").val());
		$(this).nextAll().hide('explode');
		$(this).prevAll().hide('explode');
		var new_img = "rgba(0, 0, 0, 0) url(" + $(this).find("img").attr("src") + ") no-repeat scroll 0% 0% / cover padding-box border-box"
		$(this).fadeOut("slow", function(){
			var nature = $(this).parent().parent();
			$(".quest_char").remove();// TODO Удаление вопроса
			nature.css("background", new_img);
			nature.css("position", "absolute");
			nature.css("top", nature.position().top);
			nature.css("left", nature.position().left);
			nature.animate({
				width:50,
				height:50,
			    opacity: 0.8,
			    top: "0px",
			    left: "0px"
		  	}, 1500
		  	, function(){
		  		$(".custom-caption").hide("slide",{ direction: "up" }, 500, function(){
		  			$(".custom-caption").html("Укажите ваш вес");
		  			$(".custom-caption").show("slide",{ direction: "up" }, 500);
		  		});		  		
		  		$(".step2").fadeIn("slow");		  		
		  	});

		});
	});

	$(".step2>input[type=submit]").on("click", function(){
		var step2 = $(this).parent();
		$(this).animate({
			opacity: 0.0,
		}, 1000
		, function(){
			$(this).css("display", "none");
		});
		step2.find("#slider").animate({
			opacity: 0.0,
		}, 1000
		, function(){
			$(this).css("display", "none");
		});
		step2.find(".step2__description").animate({
			opacity: 0.0,
		}, 1000
		, function(){
			$(this).remove();
		});
		step2.find(".amount").html($("#amount"));
		Anket_Questions.setWeight(parseInt($("#amount").val()));
		step2.css("position", "absolute");
		step2.css("left", "43%");
		step2.animate({
				width:50,
				height:50,
			    opacity: 0.8,
			    top: "60px",
			    left: "0px"
		  	}, 1500, function(){
		  		$(".custom-caption").hide("slide",{ direction: "up" }, 500, function(){
		  			$(".custom-caption").html("Ответьте на вопросы ");
		  			$(".custom-caption").show("slide",{ direction: "up" }, 500);
		  		});
		  		$(".step3").show("scale", 2500);//check_this
		  	});
		$("#amount").css("font-size","20px");
	});

</script>
</body>
</html>
